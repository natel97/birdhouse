# Birdhouse

## About

Birdhouse is an API scaffolding tool for NestJS

Go from YAML to YAPI in minutes :D

## Warnings

For Docs Generation, this requires Haskell and the `erd` package installed.
If you don't install it, you'll be fine with running the command `docker-compose up --build` after it fails.

## Usage

Usage: birdhouse `<command>`

where `<command>` is one of:
construct, init

## Example Syntax

```yaml
api:
  name: SuperBlog
  domain: superblogging
  entities:
    user:
      primary-key:
        id: string

      schema:
        name: string
        email: string
        age: number

      one-to-many:
        - article

    article:
      primary-key:
        id: string

      schema:
        title: string
        body: string
        created: Date
        updated: Date

      many-to-one:
        - user

      one-to-many:
        - articleTag

    tag:
      primary-key:
        name:
          type: string
          autogenerated: false

      one-to-many:
        - articleTag

    articleTag:
      primary-key:
        id: string

      many-to-one:
        - article
        - tag

  routes:
    article:
      - INDEX
      - GET
      - POST
      - PUT
      - DELETE

    user:
      - INDEX
      - GET
      - POST
      - PUT
      - DELETE

    tag:
      - INDEX
      - GET
```

Will result in something like

```
├── package.json
├── README.md
├── docs
│   ├── db.er
│   ├── README.md
│   └── db.png
├── src
│   ├── article
│   │   ├── article.entity.ts
│   │   ├── article.service.ts
│   │   ├── article.controller.ts
│   │   └── article.module.ts
│   ├── tag
│   │   ├── tag.entity.ts
│   │   ├── tag.service.ts
│   │   ├── tag.controller.ts
│   │   └── tag.module.ts
│   ├── articleTag
│   │   ├── articleTag.entity.ts
│   │   ├── articleTag.service.ts
│   │   ├── articleTag.controller.ts
│   │   └── articleTag.module.ts
│   ├── user
│   │   ├── user.entity.ts
│   │   ├── user.service.ts
│   │   ├── user.controller.ts
│   │   └── user.module.ts
│   ├── app.controller.ts
│   |── app.module.ts
│   └── main.ts
├── dockerfile
├── docker-compose.yml
├── .birdhouse.yml
└── .gitignore

```

## Development

use `npm link`

## Future

Would love to use AST rather than injecting files
